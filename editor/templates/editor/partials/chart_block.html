<div class="p-4 bg-white rounded-lg shadow editor-block" data-block-type="chart" data-id="{{ id|default:'' }}">
    <div class="flex items-start gap-4">
        <span class="drag-handle text-gray-400 hover:text-gray-600 mt-2"><i class="fas fa-grip-vertical"></i></span>
        <div class="flex-grow space-y-3">
            <label class="block text-sm font-medium text-gray-500">Chart (HTML Upload)</label>
            {% if chart_url %}
            <p class="text-xs text-gray-500">
                Current file: <a href="{{ chart_url }}" target="_blank">{{ chart_url|slice:":50" }}...</a>
                <br>To replace this chart, choose a new file below.
            </p>
            {% endif %}
            
            {# THE FIX: Use the 'file_input_name' variable passed from the parent template #}
            <input type="file" name="{{ file_input_name|default:'chart_file' }}" accept=".html" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"/>
            
            <input type="text" name="title" class="w-full border-gray-300 rounded-md text-sm" value="{{ title|default:'' }}" placeholder="Chart Title (optional)">
            </div>
        <button type="button" class="delete-block-btn text-red-500 hover:text-red-700 mt-2"><i class="fas fa-trash-alt"></i></button>
    </div>
</div>